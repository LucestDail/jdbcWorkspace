<%@page import="model.Member"%>
<%@page import="model.MemberDao"%>
<%@ page language="java" contentType="text/html; charset=EUC-KR"
    pageEncoding="EUC-KR"%>
<!DOCTYPE html>
<%-- 
정신 차리자!
1. 파라매터값 저장
2. db 정보 읽어서 아이디와 비밀번호를 비교
3. 아이디가 없는 경우
-> 아이디가 없습니다. 메시지 출력 후 loginForm.jsp 페이지로 이동
	비밀번호가 틀린 경우
-> 비밀번호가 틀립니다. 메시치 출력 후 loginFrom.jsp 페이지 이동
	아이디, 비밀번호 일치
			-session 객체에 로그인 정보 저장
			- 이름 님이 로그인 했습니다. 메시지 출력 후 main.jsp 페이지 이동


 --%>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>
</head>
<body>
<%
	String msg = "아이디를 확인하세요";
	String url = "loginForm.jsp";
	// 1. 파라매터값 저장
	request.setCharacterEncoding("utf-8");
	String id = request.getParameter("id");
	String pass = request.getParameter("pass");
	//2. DB 정보 읽어서 아이디와 비밀번호 비교
	Member mem = new MemberDao().selectOne(id);
	//3. 아이디 비밀번호 검증
	if(mem != null){
		if(pass.equals(mem.getPass())){
			session.setAttribute("login",id);
			msg = mem.getName() + "님이 로그인 했습니다.";
			url = "main.jsp";
		}else{
			msg = "비밀번호가 틀립니다...";
		}
	}
%>
<script>
	alert("<%=msg%>");
	location.href="<%=url%>";
</script>
</body>
</html>